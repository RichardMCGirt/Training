:root{--bg:#f7f7fb;--card:#fff;--text:#1f2937;--muted:#6b7280;--brand:#2563eb;--bad:#dc2626;--ok:#059669;--border:#e5e7eb;--hover:#f1f5f9}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:14px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"}
h1,h2{margin:0 0 8px}
.wrap{max-width:1100px;margin:30px auto;padding:0 16px}
.row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.grid{display:grid;grid-template-columns:1fr 380px;gap:16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px;box-shadow:0 1px 8px rgba(0,0,0,.04)}
.muted{color:var(--muted)}
.small{font-size:12px}
input[type="text"],input[type="search"],input[type="number"],textarea,select{width:100%;padding:10px;border:1px solid var(--border);border-radius:10px;background:#fff}
textarea{min-height:90px;resize:vertical}
.btn{padding:10px 14px;border-radius:10px;border:1px solid var(--border);background:#fff;cursor:pointer;font-weight:600}
.btn:hover{border-color:#cbd5e1;background:#fff}
.btn[disabled]{opacity:.5;cursor:not-allowed}
.btn-ghost{background:#fff;border-color:transparent}
.pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#eef2ff;color:#4f46e5;font-weight:600;margin:0 4px}
.stage{min-height:140px}
.divider{height:1px;background:var(--border);margin:10px 0}
.toast{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);background:#111827;color:#fff;padding:10px 14px;border-radius:10px;opacity:0;pointer-events:none;transition:.25s}
.toast.show{opacity:1;pointer-events:auto}

.two-col{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media (max-width:980px){.grid{grid-template-columns:1fr}}
.full{width:100%}

/* Labels */
.section-title{font-weight:700;margin-top:.25rem}
.section-subtitle{font-weight:700;margin-top:.5rem}

/* Field rows */
.field{display:flex;flex-direction:column;gap:6px}
.inline{display:flex;gap:10px;align-items:center}
.inline .grow{flex:1}

/* Sub-hints */
.hint{color:#64748b}
.hint.small{font-size:12px}

/* Steps legend (unchanged) */
.steps{display:flex;gap:10px;align-items:center;margin:.25rem 0 .5rem}
.step{display:flex;align-items:center;gap:.5rem;font-weight:700}
.step .num{width:22px;height:22px;border-radius:999px;background:var(--brand);color:#fff;display:inline-flex;align-items:center;justify-content:center;font-size:12px}
.legend{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin:.5rem 0 .25rem}
.legend .key{display:flex;gap:8px;align-items:center;font-size:12px;color:#475569}
.badge{font-size:.75rem;padding:.15rem .5rem;border-radius:999px;border:1px solid #ddd;background:#fff}
.badge.all{border-color:#0a7;color:#0a7}
.badge.some{border-color:#c78300;color:#c78300}
.badge.none{border-color:#94a3b8;color:#64748b}

/* Assignments list (unchanged) */
.module-list{list-style:none;padding:0;margin:.5rem 0;max-height:420px;overflow:auto;border:1px solid #ddd;border-radius:12px;background:#fff}
.module-list li{display:grid;grid-template-columns:1fr auto;align-items:center;gap:.75rem;padding:.75rem .9rem;border-bottom:1px solid #eee;cursor:pointer}
.module-list li:last-child{border-bottom:0}
.module-list li:hover{background:var(--hover)}
.module-list .pick{display:flex;gap:.75rem;align-items:center}
.module-list .pickbox{width:18px;height:18px}
.module-list .name{font-weight:700}
.module-list .meta{font-size:.8rem;opacity:.75}
.module-list .tag{font-size:.75rem;padding:.2rem .5rem;border-radius:999px;border:1px solid #ddd}
.module-list li.is-all .tag{border-color:#0a7;color:#0a7}
.module-list li.is-some .tag{border-color:#c78300;color:#c78300}
.module-list li.selected{outline:2px solid #93c5fd;background:#eff6ff}
.module-empty{border:1px dashed #cbd5e1;border-radius:12px;padding:16px;text-align:center;color:#64748b;background:#f8fafc}

.sticky-actions{position:sticky;bottom:0;display:flex;gap:.5rem;justify-content:flex-end;background:linear-gradient(180deg, rgba(255,255,255,0) 0%, #fff 40%);padding:.75rem .25rem;border-top:1px solid #e5e7eb;margin-top:.5rem}
.primary{border-color:#06c;background:#eef6ff}
.danger{border-color:#c33;background:#ffecec}
.ok{color:#059669}
.bad{color:#dc2626}

/* Chips + Module↔Titles matrix (unchanged) */
.chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
.chip{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border:1px solid var(--border);border-radius:999px;background:#fff}
.chip .x{cursor:pointer;font-weight:800;opacity:.7}
.chip .x:hover{opacity:1}
.modtitle-grid{display:grid;grid-template-columns:1fr;gap:12px}
.modtitle-card{border:1px solid var(--border);border-radius:12px;padding:12px;background:#fff}
.modtitle-head{display:flex;justify-content:space-between;align-items:center;gap:10px}
.modtitle-name{font-weight:800}
.addbar{display:flex;gap:8px;align-items:center;margin-top:10px}
.addbar .status{font-size:12px;color:#64748b}

/* NEW: reveal/hide helper */
.hide{display:none !important}

/* NEW: “Add new module” row styling */
.add-new-row{display:flex;gap:8px;align-items:center}
.add-new-row .label-mini{font-size:12px;color:#64748b}
.add-new-row .kbd{font-family:ui-monospace,Menlo,monospace;font-size:.8rem;padding:.05rem .35rem;border:1px solid #ddd;border-radius:6px;background:#fff}
* { box-sizing: border-box; }
:root {
  --bg: #0f172a;
  --ink: #e2e8f0;
  --ink-muted: #94a3b8;
  --brand: #22d3ee;
  --active: #38bdf8;
}


/* NAVBAR */
.nav {
  position: sticky;
  top: 0;
  z-index: 20;
  background: var(--bg);
  border-bottom: 1px solid rgba(255,255,255,0.08);
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.75rem 1rem;
}

.brand {
  font-weight: 700;
  letter-spacing: 0.2px;
  text-decoration: none;
  color: var(--ink);
  border-bottom: 2px solid transparent;
}

.nav-toggle {
  margin-left: auto;
  font-size: 1.25rem;
  line-height: 1;
  background: transparent;
  color: var(--ink);
  border: 1px solid rgba(255,255,255,0.2);
  padding: 0.4rem 0.6rem;
  border-radius: 0.5rem;
  display: none; /* shown on small screens */
  cursor: pointer;
}

.nav-list {
  margin: 0 0 0 auto;
  padding: 0;
  list-style: none;
  display: flex;
  gap: 0.75rem;
}

.nav-list a {
  display: inline-block;
  padding: 0.5rem 0.75rem;
  border-radius: 0.5rem;
  color: var(--ink);
  text-decoration: none;
  transition: background 160ms ease, color 160ms ease, transform 60ms ease;
}

.nav-list a:hover {
  background: rgba(255,255,255,0.06);
}

.nav-list a.active {
  color: var(--active);
  background: rgba(56, 189, 248, 0.12);
  border: 1px solid rgba(56, 189, 248, 0.25);
}

/* Mobile */
@media (max-width: 700px) {
  .nav-toggle { display: inline-block; }
  .nav-list {
    position: absolute;
    left: 0; right: 0;
    top: 100%;
    background: var(--bg);
    border-bottom: 1px solid rgba(255,255,255,0.08);
    display: none;
    flex-direction: column;
    padding: 0.5rem;
  }
  .nav-list.open { display: flex; }
}
/* ===== Questions list / modules ===== */

.qtoolbar { gap: 10px; align-items: center; }
.qtoolbar h2 { margin: 0; }
.qfilters { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.qfilters input[type="search"] {
  min-width: 280px;
}

.toggle { display: inline-flex; align-items: center; gap: 6px; font-size: 12px; color: var(--muted); }
.toggle input { accent-color: var(--brand); }

/* Module section wrapper produced by renderModulesView() */
#moduleGroups { display: grid; gap: 10px; }

/* Each module container */
.mod {
  border: 1px solid var(--border);
  border-radius: 12px;
  background: #fff;
  overflow: hidden;
}

/* Clickable header that toggles body (button.mod-head) */
.mod-head {
  width: 100%;
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: .75rem;
  padding: 12px 14px;
  background: linear-gradient(180deg, #fff 0%, var(--hover) 100%);
  border: 0;
  cursor: pointer;
  text-align: left;
  font: inherit;
}

/* Module name */
.mod-head > span:first-child {
  font-weight: 800;
  letter-spacing: .2px;
}

/* Count badge */
.mod-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 26px;
  height: 22px;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 0 8px;
  background: #fff;
  font-size: 12px;
  color: #475569;
}

/* Add a chevron via CSS so no extra markup needed */
.mod-head::after {
  content: "▸";
  font-size: 14px;
  opacity: .7;
  transition: transform .18s ease;
  justify-self: end;
}

/* Rotate chevron when expanded */
.mod-head[aria-expanded="true"]::after {
  transform: rotate(90deg);
}

/* Module body (hidden/unhidden by JS). We keep spacing and subtle divider. */
.mod-body {
  padding: 8px 12px 10px;
  border-top: 1px solid var(--border);
  background: #fff;
}

/* Individual question row */
.qline {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: start;
  padding: 10px 8px;
  border-radius: 10px;
  transition: background .15s ease, box-shadow .15s ease;
}

/* Hover state on a question row */
.qline:hover {
  background: var(--hover);
  box-shadow: 0 1px 0 rgba(0,0,0,.04) inset;
}

/* Question text block */
.qtext > div:first-child { /* the <strong>Question</strong> line */
  line-height: 1.35;
}
.qtext .small {
  margin-top: 2px;
}

/* Right-hand action buttons in each row */
.qline .actions .btn {
  padding: 8px 10px;
  border-radius: 8px;
  font-size: 12px;
}

/* “Edit” ghost button */
.qline .actions .btn.btn-ghost {
  border-color: transparent;
}

/* “Delete” emphasis aligned with your palette */
.qline .actions .btn.btn-danger {
  border-color: #fecaca;
  background: #fff5f5;
  color: #b91c1c;
}

/* Spacing between questions inside a module body */
.mod-body .qline + .qline {
  margin-top: 6px;
}

/* Mobile niceties */
@media (max-width: 700px) {
  .qfilters { width: 100%; }
  .qfilters input[type="search"] { min-width: 0; flex: 1; }
  .qline {
    grid-template-columns: 1fr; /* stack actions below on small screens */
  }
  .qline .actions { justify-content: flex-start; }
}
/* ========== Create / Edit Question Panel ========== */

.card-head { display:flex; align-items:center; justify-content:space-between; gap:12px; }
.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px 16px;
}
.form-grid .col-span-2 { grid-column: 1 / -1; }

.field { display:flex; flex-direction:column; gap:6px; }
.field .hint { color: var(--muted); }
.label-mini { font-size: 11px; color: var(--muted); }

.section-title { font-weight: 700; }
.inline { display:flex; gap:8px; align-items:center; }
.inline .grow { flex: 1 1 auto; }

.kbd {
  display:inline-block; padding:2px 6px; border:1px solid var(--border);
  border-radius:6px; font-size:11px; background:#fafafa;
}

.meta-row {
  display:flex; align-items:center; justify-content:space-between;
  margin-top: 4px;
}

textarea#questionText {
  resize: vertical;
  min-height: 96px;
  line-height: 1.4;
}

/* Two-column mini grid (Slide/Order) */
.two-col {
  display:grid; grid-template-columns: 1fr 160px; gap: 10px 12px;
}

/* New module inline row */
.add-new-row {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 10px;
  border: 1px dashed var(--border);
  border-radius: 10px;
  background: #fff;
}

.chips-row {
  display:flex; flex-wrap:wrap; gap: 6px; margin-top: 6px;
}
.chip {
  display:inline-flex; align-items:center; gap:6px;
  padding: 4px 8px; border:1px solid var(--border); border-radius:999px;
  background:#fff; font-size:12px; color:#475569;
}
.chip .x { font-weight:700; opacity:.6; cursor:pointer; }

/* Options list (MC) */
.options { display:flex; flex-direction:column; gap:8px; margin-top:8px; }

/* Generic row look for option lines—works even if your JS outputs different class names */
.options > * {
  display:grid;
  grid-template-columns: auto 1fr auto auto;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: #fff;
  transition: box-shadow .12s ease, border-color .12s ease, background .12s ease;
}

/* Handle/drag affordance (if present) */
.options [data-handle],
.options .handle,
.options .drag {
  cursor: grab;
  user-select: none;
  font-size: 18px;
  opacity: .5;
}

/* Option input/text */
.options input[type="text"],
.options textarea {
  width: 100%;
}

/* Correct answer highlight (when your JS toggles [data-correct="true"] or .is-correct) */
.options > [data-correct="true"],
.options > .is-correct {
  border-color: #86efac;
  background: #f0fdf4;
}

/* Remove button look */
.options .btn-remove,
.options .btn-danger {
  border-color: #fecaca;
  background: #fff5f5;
  color: #b91c1c;
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 12px;
}

/* Top row helpers */
.row.spread { display:flex; align-items:center; justify-content:space-between; }
.row.gap-6 { display:flex; gap:6px; }

/* Buttons */
.btn-ghost {
  background:#fff;
  color:#334155;
  border-color: var(--border);
}
.btn-ghost:hover { background: var(--hover); }

/* Responsive */
@media (max-width: 900px) {
  .form-grid { grid-template-columns: 1fr; }
  .two-col { grid-template-columns: 1fr 140px; }
}
@media (max-width: 520px) {
  .two-col { grid-template-columns: 1fr; }
  .options > * { grid-template-columns: auto 1fr auto; }
}
